# 项目改进与学习路线总结

## 📌 需要解决和改善的问题
1. **追踪与阵型不稳定**
   - 在形成 F 阵型时，常出现检测不到 `objectpoint` → 导致机器人停滞。
   - 当前进入条件过于严格，需要继续调整：
     - 放宽 **FOV角度**：±45° 进入，保持时 ±60°。
     - 放宽 **距离阈值**：进入 ≤2.0m，保持 ≤2.5m。
     - 增加 **超时阈值**：追踪丢失超过 3s 才退出。

2. **轨迹记录与可视化**
   - 需要在轨迹中 **剔除异常点**（目前只实现了时间/空间剔除，后续可加入速度阈值过滤）。
   - 实验时仍出现 **人物轨迹偏移**，需确认：
     - 坐标系是否统一 (`map` / `base_link`)。
     - 是否出现 **机器人/人物数据读取反置**。
   - 改进绘图脚本 `plot_robot_person.py`：
     - 在图中显示 **机器人前进方向箭头**。
     - 统一起点/终点标记样式。
     - 图例位置更合理（右下角 / 图表下方）。

3. **ROS节点逻辑**
   - `sks_objectpoint_robot_person.cpp` 与 `hdk_objectpoint_finder.cpp` 协同时，存在失去 `objectpoint` 后机器人完全停滞的问题。
     - 建议改进：在失去 `objectpoint` 时仍能保持纯追踪模式。
   - `rosgpt.py` 的节点命名和 API Key 加载需要优化（使用 `OPENAI_API_KEY` 环境变量）。
   - `traj_standardizer_nn`（record_traj.py）时序匹配逻辑需要进一步测试，保证人物轨迹与机器人轨迹严格对齐。

4. **实验可操作性**
   - JSON 配置文件能否通过 **launch 文件** 自动加载。
   - 阵型模式与纯追踪模式能否在一个包内切换，而非分包实现。
   - 确认 `liu_formation_track` 包的完整使用流程，并编写更直观的 README。

---

## 📖 推荐学习路径
1. **坐标变换与机器人学基础**
   - ROS TF 使用与 2D 刚体变换（平移 + 旋转）。
   - 粒子滤波与贝叶斯滤波原理（概率推断 + 状态估计）。
   - 人物跟随算法中的传感器融合（激光雷达 + 视觉）。

2. **算法与工程实现**
   - **粒子滤波**：理解数学原理（采样-预测-更新-重采样），并用 Python 写小例子。
   - **滑动窗口 / 双指针**：继续练习 LeetCode 高频题，掌握常见模式。
   - **动态规划**：以零钱兑换 (LC322) 为例，理解“子问题分解 + 最优子结构”。
   - **数据清理**：学习异常点检测（统计学3σ原则、基于速度的过滤）。

3. **实验方法**
   - 学会设计 **消融实验**（如调整 FOV/距离阈值，观察进入阵型成功率）。
   - 学会轨迹可视化与误差分析，保证能快速定位问题。

---

## 📑 推荐阅读论文
1. **F-Formation & Human-Robot Interaction**
   - Kendon, A. *"F-Formations in Communication"* — F 阵型最早的理论来源。
   - Cristani et al., *"Human Behavior Analysis: F-formation Detection in Real Scenarios"* (CVPR 2011) — 阵型检测经典方法。
   - Pedica & Vilhjálmsson, *"Spontaneous F-formations in Mixed Reality Meetings"* — 多机器人/人场景的 F-formation。

2. **跟随与追踪**
   - Gockley et al., *"Designing Robots for Long-Term Social Interaction"* (IROS 2005) — 社会型机器人跟随。
   - Bennewitz et al., *"Learning Motion Patterns of People for Socially Compliant Robot Navigation"* (IJRR 2007)。

3. **多机器人协同**
   - Breazeal, C. *"Social Robots for Human Interaction"* — 多机器人编队与人类交互。
   - Shiomi et al., *"Group Attention Control for Social Robots"* — 阵型与注视行为结合。

---

## ✅ 下一步建议
1. **技术实现**
   - 在 `sks_objectpoint_robot_person` 中加入 fallback → 当失去 objectpoint 时切换到纯追踪模式。
   - 改进 `plot_robot_person.py`，增加异常点可视化（不同颜色标记）。
   - 调整参数（阈值/FOV/时间窗口），做对比实验。

2. **学习**
   - 每天抽时间练习 3~5 道 LeetCode 高频题（滑动窗口 + 动态规划）。
   - 阅读至少 2 篇与 F-formation/跟随相关的论文，整理要点。

3. **文档**
   - 给 `liu_formation_track` 包写一份 README，包含：
     - 节点功能说明。
     - 启动方式（launch）。
     - 参数配置示例。
     - 实验演示流程。
